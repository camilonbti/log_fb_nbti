<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebird Log Analyzer</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .container { max-width: 1200px; margin: 0 auto; }
        .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 20px 0; }
        .stat-box { border: 1px solid #ddd; padding: 15px; border-radius: 4px; }
        .filters { margin: 20px 0; }
        .filters select, .filters input { margin-right: 10px; padding: 5px; }
        button { padding: 8px 16px; background-color: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background-color: #45a049; }
        .chart-container { height: 400px; margin: 20px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Firebird Log Analyzer</h1>

        <form id="uploadForm">
            <input type="file" id="logFile" accept=".json" required>
            <button type="submit">Analyze Log</button>
        </form>

        <div class="filters">
            <label>Execution Time (ms):</label>
            <input type="number" id="timeFilter">
            
            <label>Statement Type:</label>
            <select id="typeFilter">
                <option value="">All Types</option>
            </select>
            
            <label>Table:</label>
            <select id="tableFilter">
                <option value="">All Tables</option>
            </select>
            
            <label>View:</label>
            <select id="viewFilter">
                <option value="">All Queries</option>
                <option value="slow">Slow Queries (>1s)</option>
                <option value="noindex">No Index Usage</option>
                <option value="top6">Top 6 Slowest</option>
            </select>
        </div>

        <div class="stats">
            <div class="stat-box">
                <h3>Total Queries</h3>
                <p id="totalQueries">0</p>
            </div>
            <div class="stat-box">
                <h3>Avg Execution Time</h3>
                <p id="avgExecTime">0ms</p>
            </div>
            <div class="stat-box">
                <h3>Max Execution Time</h3>
                <p id="maxExecTime">0ms</p>
            </div>
            <div class="stat-box">
                <h3>Slow Queries (>1s)</h3>
                <p id="slowQueries">0</p>
            </div>
            <div class="stat-box">
                <h3>No Index Queries</h3>
                <p id="noIndexQueries">0</p>
            </div>
            <div class="stat-box">
                <h3>Index Usage Rate</h3>
                <p id="indexUsageRate">0%</p>
            </div>
            <div class="stat-box">
                <h3>Total Reads</h3>
                <p id="totalReads">0</p>
            </div>
            <div class="stat-box">
                <h3>Total Writes</h3>
                <p id="totalWrites">0</p>
            </div>
            <div class="stat-box">
                <h3>Total Fetches</h3>
                <p id="totalFetches">0</p>
            </div>
        </div>

        <div class="charts">
            <div class="chart-container">
                <canvas id="performanceChart"></canvas>
            </div>
            <div class="chart-container">
                <canvas id="tableAccessChart"></canvas>
            </div>
        </div>

        <table>
            <thead>
                <tr>
                    <th>Timestamp</th>
                    <th>Event</th>
                    <th>Statement</th>
                    <th>Tables</th>
                    <th>Time (ms)</th>
                    <th>Index</th>
                    <th>Reads</th>
                    <th>Writes</th>
                    <th>Fetches</th>
                </tr>
            </thead>
            <tbody id="resultsBody"></tbody>
        </table>
    </div>

    <script src="/static/js/utils.js"></script>
    <script src="/static/js/charts.js"></script>
    <script src="/static/js/filters.js"></script>
    <script src="/static/js/display.js"></script>
    <script src="/static/js/main.js"></script>
</body>
</html>Ã¥